
## 调度优先级

用于确定调度程序中任务的优先级

- scheduleCallback 注册调度任务传入的优先级
	- priorityLevel 转化为 expirationTime
	- expirationTime 就是 sortIndex
	- sortIndex 用户堆排序
- priorityLevel 越小，优先级越高
- 优先级越高过期时间越小
- 过期时间越小, 任务越排在最前面

```js
// 立即优先级 用于处理紧急事件，例如用户输入
export const ImmediatePriority = Scheduler.unstable_ImmediatePriority;
// 用户阻塞优先级 滚动等事件
export const UserBlockingPriority = Scheduler.unstable_UserBlockingPriority;
// 默认
export const NormalPriority = Scheduler.unstable_NormalPriority;
export const LowPriority = Scheduler.unstable_LowPriority;
// 空闲
export const IdlePriority = Scheduler.unstable_IdlePriority;
```


## 事件优先级

- 标记用户事件的优先级
- 参考getEventPriority

```js
export const DiscreteEventPriority: EventPriority = SyncLane;
export const ContinuousEventPriority: EventPriority = InputContinuousLane;
export const DefaultEventPriority: EventPriority = DefaultLane;
export const IdleEventPriority: EventPriority = IdleLane;
```

## 车道优先级

https://github.com/facebook/react/pull/18796
fiber优先级，更新优先级

优点：
-   通道将任务优先级的概念（“任务 A 的优先级是否高于任务 B？”）与任务批处理（“任务 A 是否属于这组任务的一部分？”）分离。
	- 便于分组，排序
-   通道可以用单一的 32 位数据类型表示许多不同的任务线
	- 便于操作
- Expiration Times 的一个类似缺陷是它限制了我们如何表达一组多个优先级
- lane,lanes,childLanes
- 车道是不透明的类型。您只能在`ReactFiberLane`模块内执行直接位掩码操作

```js
// 用户输入，点击等
export const SyncLane: Lane = 0b0000000000000000000000000000001;
// 滚动，拖拽等
export const InputContinuousLane: Lane = 0b0000000000000000000000000000100;
// 默认
export const DefaultLane: Lane = 0b0000000000000000000000000010000;
// 空闲
export const IdleLane: Lane = 0b0100000000000000000000000000000;
```


### 为啥有更新优先级?

https://jser.dev/react/2022/03/26/lanes-in-react

## 三者关系

初次render  lane 为 DefaultLane
车道优先级 >> 事件优先级 >> 调度优先级
getEventPriority >> lanesToEventPriority


vue中有优先级概念吗？